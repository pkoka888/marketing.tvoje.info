---
// Theme Switcher Component
// Renders 5 theme options (TITAN, NOVA, TARGET, SPARK, LUX)
// Default: TITAN
---

<div
  class="theme-switcher-grid flex gap-1 p-1 bg-gray-100 dark:bg-dark-800 rounded-lg shadow-sm"
  role="radiogroup"
  aria-label="Theme Selection"
>
  <!-- 1. Titan (Default) - Direct/Professional -->
  <button
    type="button"
    class="theme-btn group relative w-8 h-8 rounded-md flex items-center justify-center transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-500"
    data-theme="titan"
    title="Titan: Přímý, profesionální"
    aria-label="Titan Theme"
  >
    <div
      class="w-full h-full rounded-md bg-white border border-gray-200 flex items-center justify-center overflow-hidden"
    >
      <div class="w-3 h-3 rounded-full bg-[#4285F4]"></div>
    </div>
  </button>

  <!-- 2. Nova - Friendly/Expert -->
  <button
    type="button"
    class="theme-btn group relative w-8 h-8 rounded-md flex items-center justify-center transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-500"
    data-theme="nova"
    title="Nova: Přátelský, partnerský"
    aria-label="Nova Theme"
  >
    <div
      class="w-full h-full rounded-md bg-gradient-to-br from-[#6366F1] to-[#22D3EE] opacity-80 flex items-center justify-center"
    >
      <div class="w-2 h-2 rounded-full bg-white/50 backdrop-blur-sm"></div>
    </div>
  </button>

  <!-- 3. Target - Goal-focused (Bow & Arrow) -->
  <button
    type="button"
    class="theme-btn group relative w-8 h-8 rounded-md flex items-center justify-center transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-500"
    data-theme="target"
    title="Target: Cílově orientovaný"
    aria-label="Target Theme"
  >
    <div class="w-full h-full rounded-md bg-[#1E40AF] flex items-center justify-center relative">
      <div
        class="w-0 h-0 border-l-[6px] border-l-[#EA580C] border-t-[4px] border-t-transparent border-b-[4px] border-b-transparent"
      >
      </div>
    </div>
  </button>

  <!-- 4. Spark - Bold/Provocative -->
  <button
    type="button"
    class="theme-btn group relative w-8 h-8 rounded-md flex items-center justify-center transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-500"
    data-theme="spark"
    title="Spark: Odvážný, provokativní"
    aria-label="Spark Theme"
  >
    <div
      class="w-full h-full rounded-sm bg-[#0A0A0A] border-[1px] border-[#00D4FF] shadow-[0_0_5px_rgba(0,212,255,0.5)] flex items-center justify-center"
    >
    </div>
  </button>

  <!-- 5. Lux - Minimal/Premium -->
  <button
    type="button"
    class="theme-btn group relative w-8 h-8 rounded-sm flex items-center justify-center transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-500"
    data-theme="lux"
    title="Lux: Premium, minimalistický"
    aria-label="Lux Theme"
  >
    <div
      class="w-full h-full rounded-sm bg-white border border-[#B8860B] flex items-center justify-center"
    >
      <span class="text-[10px] font-serif font-bold text-black">L</span>
    </div>
  </button>

  <!-- 6. Shad CN Light -->
  <button
    type="button"
    class="theme-btn group relative w-8 h-8 rounded-md flex items-center justify-center transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-500"
    data-theme="shad-light"
    title="Shad/Light: Moderní, čistý"
    aria-label="Shad Light Theme"
  >
    <div
      class="w-full h-full rounded-md bg-white border border-gray-300 flex items-center justify-center"
    >
      <div class="w-3 h-3 rounded-full bg-blue-500"></div>
    </div>
  </button>

  <!-- 7. Shad CN Dark -->
  <button
    type="button"
    class="theme-btn group relative w-8 h-8 rounded-md flex items-center justify-center transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-500"
    data-theme="shad-dark"
    title="Shad/Dark: Moderní, tmavý"
    aria-label="Shad Dark Theme"
  >
    <div
      class="w-full h-full rounded-md bg-gray-900 border border-gray-700 flex items-center justify-center"
    >
      <div class="w-3 h-3 rounded-full bg-blue-400"></div>
    </div>
  </button>
</div>

<script is:inline>
  // Self-contained logic to attach listener if not already handled globally
  // Note: Layout.astro already handles global .theme-btn clicks
  // This script ensures state is set on mount
  document.addEventListener('DOMContentLoaded', () => {
    const currentTheme = localStorage.getItem('siteTheme') || 'titan';
    const btns = document.querySelectorAll('.theme-switcher-grid .theme-btn');

    // Update visual state
    btns.forEach((btn) => {
      if (btn.getAttribute('data-theme') === currentTheme) {
        btn.classList.add('ring-2', 'ring-offset-2', 'ring-primary-500');
      }
    });

    // Handle clicks
    btns.forEach((btn) => {
      btn.addEventListener('click', (e) => {
        const button = e.currentTarget;
        const theme = button.getAttribute('data-theme');

        // Call global handler
        if (window.setSiteTheme) {
          window.setSiteTheme(theme);
        }

        // Update local visual state (redundant but safe)
        btns.forEach((b) => b.classList.remove('ring-2', 'ring-offset-2', 'ring-primary-500'));
        button.classList.add('ring-2', 'ring-offset-2', 'ring-primary-500');
      });
    });
  });
</script>
