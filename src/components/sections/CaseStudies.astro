---
import type { Language } from '../../i18n/translations';
import { getLangFromUrl, translations } from '../../i18n/translations';

interface Props {
  lang?: Language;
}

const { lang: propLang } = Astro.props;
const lang = propLang || getLangFromUrl(Astro.url);
const t = translations[lang];

const caseStudies = [
  {
    slug: 'cloud-migration',
    title: lang === 'cs' ? 'Cloud Migration pro E-shop' : 'Cloud Migration for E-shop',
    category: 'Infrastructure',
    excerpt: lang === 'cs'
      ? 'Kompletní migrace on-premise infrastruktury do AWS s využitím Terraform a Kubernetes'
      : 'Complete migration of on-premise infrastructure to AWS using Terraform and Kubernetes',
    image: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=800&h=600&fit=crop',
    stats: [
      { value: '40%', label: lang === 'cs' ? 'Úspora nákladů' : 'Cost savings' },
      { value: '99.9%', label: 'Uptime' },
      { value: '3x', label: lang === 'cs' ? 'Rychlost' : 'Speed' },
    ],
  },
  {
    slug: 'growth-funnel',
    title: lang === 'cs' ? 'Growth Funnel pro Startup' : 'Growth Funnel for Startup',
    category: 'Growth',
    excerpt: lang === 'cs'
      ? 'Implementace kompletního marketingového trychtýře pro SaaS startup'
      : 'Complete marketing funnel implementation for SaaS startup',
    image: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=600&fit=crop',
    stats: [
      { value: '250%', label: lang === 'cs' ? 'Nárůst leadů' : 'Lead increase' },
      { value: '35%', label: 'CR' },
      { value: '5x', label: lang === 'cs' ? 'ROAS' : 'ROAS' },
    ],
  },
  {
    slug: 'cicd-automation',
    title: lang === 'cs' ? 'CI/CD Automation' : 'CI/CD Automation',
    category: 'Automation',
    excerpt: lang === 'cs'
      ? 'Automatizovaný deployment pipeline s GitHub Actions a Docker'
      : 'Automated deployment pipeline with GitHub Actions and Docker',
    image: 'https://images.unsplash.com/photo-1518432031352-d6c5c10da5a?w=800&h=600&fit=crop',
    stats: [
      { value: '70%', label: lang === 'cs' ? 'Rychlejší release' : 'Faster releases' },
      { value: '0', label: lang === 'cs' ? 'Lidské chyby' : 'Human errors' },
      { value: '50%', label: lang === 'cs' ? 'Úspora času' : 'Time savings' },
    ],
  },
];
---

<section class="py-16 md:py-24 bg-gray-50 dark:bg-dark-800">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center mb-16">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
        {lang === 'cs' ? 'Case Studies' : 'Case Studies'}
      </h1>
      <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
        {lang === 'cs'
          ? 'Podívejte se na konkrétní výsledky našich projektů'
          : 'See the concrete results of our projects'}
      </p>
    </div>

    <!-- Case Studies Grid -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {caseStudies.map((study) => (
        <article class="case-study-card bg-white dark:bg-dark-700 rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
          <!-- Image -->
          <div class="relative aspect-video overflow-hidden">
            <img
              src={study.image}
              alt={study.title}
              class="w-full h-full object-cover transform hover:scale-105 transition-transform duration-500"
            />
            <div class="absolute top-4 left-4">
              <span class="px-3 py-1 bg-primary-600 text-white text-xs font-medium rounded-full">
                {study.category}
              </span>
            </div>
          </div>

          <!-- Content -->
          <div class="p-6">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">
              {study.title}
            </h3>
            <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm">
              {study.excerpt}
            </p>

            <!-- Stats -->
            <div class="grid grid-cols-3 gap-4 mb-4">
              {study.stats.map((stat) => (
                <div class="text-center">
                  <div class="text-lg font-bold text-primary-600 dark:text-primary-400">{stat.value}</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400">{stat.label}</div>
                </div>
              ))}
            </div>

            <!-- CTA -->
            <a
              href={lang === `/${study.slug}` ? `/projects/${study.slug}` : `/cs/projects/${study.slug}`}
              class="inline-flex items-center text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors"
            >
              {lang === 'cs' ? 'Číst více' : 'Read more'}
              <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </a>
          </div>
        </article>
      ))}
    </div>

    <!-- All Projects CTA -->
    <div class="text-center mt-12">
      <a
        href={lang === 'cs' ? '/cs/projects' : '/projects'}
        class="inline-block px-8 py-4 bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-medium rounded-lg hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors"
      >
        {lang === 'cs' ? 'Zobrazit všechny projekty' : 'View All Projects'}
      </a>
    </div>
  </div>
</section>
