---
import Layout from '../../../layouts/Layout.astro';
import Header from '../../../components/common/Header.astro';
import Footer from '../../../components/common/Footer.astro';
import { translations } from '../../../i18n/translations';

const lang = 'cs';
const t = translations[lang];

const projects = [
  {
    slug: 'osvezeni-identity-znacky',
    title: 'Osvěžení identity značky',
    description:
      'Kompletní přepracování vizuální identity a brandové strategie pro přední tech startup',
    image: 'https://images.unsplash.com/photo-1557838923-2985c318be48?w=800&h=600&fit=crop',
    tags: ['Branding', 'Design', 'Strategie'],
    category: 'creative',
    stats: [
      { value: '300%', label: 'Zapamatovatelnost' },
      { value: 'Premium', label: 'Poziocionování' },
    ],
  },
  {
    slug: 'optimalizace-rustoveho-funnelu',
    title: 'Optimalizace růstového funnelu',
    description: 'Automatizovaný generování leadů a konverzní funnel pomocí AI-řízené analytiky',
    image: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=600&fit=crop',
    tags: ['Růst', 'Automatizace', 'Analytika', 'AI'],
    category: 'automation',
    stats: [
      { value: '150%', label: 'ROAS' },
      { value: '45%', label: 'Snížení CPL' },
    ],
  },
  {
    slug: 'ai-zakaznicka-angazovanost',
    title: 'AI zákaznická angažovanost',
    description: 'Implementace konverzační AI pro automatizovaný personalizovaný marketing',
    image: 'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=800&h=600&fit=crop',
    tags: ['OpenAI', 'NLP', 'Marketingová AI'],
    category: 'ai',
    stats: [
      { value: '60%', label: 'Zvýšení zapojení' },
      { value: '24/7', label: 'Dostupnost' },
    ],
  },
  {
    slug: 'seo-dominance-kampan',
    title: 'SEO Dominance kampaň',
    description:
      'Datově řízená SEO strategie pro získání předních pozic u konkurenčních oborových klíčových slov',
    image: 'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&h=600&fit=crop',
    tags: ['SEO', 'Obsah', 'Inbound'],
    category: 'growth',
    stats: [
      { value: '250%', label: 'Organický traffic' },
      { value: '#1', label: 'Přední pozice' },
    ],
  },
];

const categories = [
  { key: 'all', label: t.projects.categories.all },
  { key: 'growth', label: 'Růst' },
  { key: 'creative', label: 'Kreativa' },
  { key: 'automation', label: 'Automatizace' },
  { key: 'ai', label: t.projects.categories.ai },
];
---

<Layout title={t.projects.title} description={t.projects.description} lang="cs">
  <Header slot="header" lang="cs" />

  <main>
    <section
      class="relative py-24 bg-gradient-to-br from-gray-50 via-white to-primary-50 dark:from-dark-900 dark:via-dark-800 dark:to-dark-900"
    >
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 dark:text-white mb-6">
          {t.projects.title}
        </h1>
        <p class="text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
          {t.projects.description}
        </p>
      </div>
    </section>

    <section class="section bg-gray-50 dark:bg-dark-800">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div
          class="flex flex-wrap justify-center gap-2 mb-12"
          role="group"
          aria-label="Project categories"
        >
          {
            categories.map((category) => (
              <button
                type="button"
                class="px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 category-btn"
                data-category={category.key}
                aria-pressed="false"
              >
                {category.label}
              </button>
            ))
          }
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="projects-grid">
          {
            projects.map((project) => (
              <article class="card group" data-category={project.category} data-aos="fade-up">
                <div class="relative overflow-hidden aspect-video">
                  <img
                    src={project.image}
                    alt={project.title}
                    loading="lazy"
                    class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"
                  />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
                </div>

                <div class="p-6">
                  <div class="flex flex-wrap gap-2 mb-4">
                    {project.tags.map((tag) => (
                      <span class="px-2 py-1 text-xs font-medium rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300">
                        {tag}
                      </span>
                    ))}
                  </div>

                  <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors">
                    {project.title}
                  </h3>

                  <p class="text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2">
                    {project.description}
                  </p>

                  <div class="flex gap-4 mb-4">
                    {project.stats.map((stat) => (
                      <div class="text-center">
                        <div class="text-lg font-bold text-primary-600 dark:text-primary-400">
                          {stat.value}
                        </div>
                        <div class="text-xs text-gray-500 dark:text-gray-400">{stat.label}</div>
                      </div>
                    ))}
                  </div>

                  <a
                    href={`/cs/projects/${project.slug}`}
                    class="inline-flex items-center text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors"
                    aria-label={`${t.projects.viewDetails}: ${project.title}`}
                  >
                    {t.projects.viewDetails}
                    <svg
                      class="w-4 h-4 ml-1 transform group-hover:translate-x-1 transition-transform"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      aria-hidden="true"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5l7 7-7 7"
                      />
                    </svg>
                  </a>
                </div>
              </article>
            ))
          }
        </div>
      </div>
    </section>

    <section class="section bg-white dark:bg-dark-900">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
          Zaujal vás některý projekt?
        </h2>
        <p class="text-lg text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto">
          Rád bych vám pomohl s vaším dalším projektem. Kontaktujte mě a promluvíme si o vašich
          nápadech.
        </p>
        <a href="/cs/contact" class="btn-primary"> Kontaktovat </a>
      </div>
    </section>
  </main>

  <Footer slot="footer" lang="cs" />
</Layout>

<script>
  const categoryButtons = document.querySelectorAll('.category-btn');
  const projectCards = document.querySelectorAll('[data-category]');

  function setActiveButton(activeBtn) {
    categoryButtons.forEach((btn) => {
      btn.classList.remove('bg-primary-600', 'text-white');
      btn.classList.add('bg-gray-200', 'dark:bg-dark-700', 'text-gray-700', 'dark:text-gray-300');
      btn.setAttribute('aria-pressed', 'false');
    });
    activeBtn.classList.remove(
      'bg-gray-200',
      'dark:bg-dark-700',
      'text-gray-700',
      'dark:text-gray-300'
    );
    activeBtn.classList.add('bg-primary-600', 'text-white');
    activeBtn.setAttribute('aria-pressed', 'true');
  }

  const allBtn = document.querySelector('[data-category="all"]');
  if (allBtn) {
    setActiveButton(allBtn);
  }

  categoryButtons.forEach((button) => {
    button.addEventListener('click', () => {
      const category = button.getAttribute('data-category');
      setActiveButton(button);

      projectCards.forEach((card) => {
        const cardCategory = card.getAttribute('data-category');
        const htmlCard = card;

        if (category === 'all' || cardCategory === category) {
          htmlCard.style.display = 'block';
          htmlCard.classList.add('animate-fade-in');
        } else {
          htmlCard.style.display = 'none';
        }
      });
    });
  });
</script>

<style>
  .category-btn:first-child {
    @apply bg-primary-600 text-white;
  }
</style>
